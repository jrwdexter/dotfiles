# ##############################################################################
# WINDOW RULES
# Application-specific window behaviors
# Ported from Awesome WM rc.lua
# ##############################################################################

# See https://wiki.hypr.land/Configuring/Window-Rules/

# ##############################################################################
# GLOBAL RULES
# ##############################################################################

windowrule {
    name = suppress-maximize-events
    match:class = .*
    suppress_event = maximize
}

windowrule {
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false
    no_focus = true
}

# ##############################################################################
# WORKSPACE ASSIGNMENTS
# ##############################################################################

# Workspace 1: Browsers
windowrule {
    name = ws1-firefox
    match:class = ^(firefox)$
    workspace = 1
}
windowrule {
    name = ws1-chrome
    match:class = ^(Google-chrome|google-chrome)$
    workspace = 1
}
windowrule {
    name = ws1-zoom
    match:class = ^(zoom)$
    workspace = 1
}

# Workspace 2: Communication
windowrule {
    name = ws2-slack
    match:class = ^(Slack|slack)$
    workspace = 2
}
windowrule {
    name = ws2-wavebox
    match:class = ^(Wavebox|wavebox)$
    workspace = 2
}
windowrule {
    name = ws2-discord
    match:class = ^(discord|Discord)$
    workspace = 2
}
windowrule {
    name = ws2-telegram
    match:class = ^(TelegramDesktop)$
    workspace = 2
}
windowrule {
    name = ws2-signal
    match:class = ^(Signal)$
    workspace = 2
}
windowrule {
    name = ws2-weechat
    match:class = ^(weechat)$
    workspace = 2
}

# Workspace 3: Frontend Dev
windowrule {
    name = ws3-firefox-dev
    match:class = ^(firefoxdeveloperedition|Firefox Developer Edition)$
    workspace = 3
}
windowrule {
    name = ws3-webstorm
    match:class = ^(jetbrains-webstorm)$
    workspace = 3
}
windowrule {
    name = ws3-postman
    match:class = ^(Postman|postman)$
    workspace = 3
}

# Workspace 4: Backend Dev
windowrule {
    name = ws4-rider
    match:class = ^(jetbrains-rider)$
    workspace = 4
}
windowrule {
    name = ws4-pycharm
    match:class = ^(jetbrains-pycharm)$
    workspace = 4
}
windowrule {
    name = ws4-cursor
    match:class = ^(Cursor|cursor)$
    workspace = 4
}
windowrule {
    name = ws4-be-terminal
    match:class = ^(be_terminal)$
    workspace = 4
}

# Workspace 5: Editor
windowrule {
    name = ws5-editor
    match:class = ^(editor)$
    workspace = 5
}

# Workspace 6: Graphics
windowrule {
    name = ws6-gimp
    match:class = ^(Gimp|gimp)$
    workspace = 6
}
windowrule {
    name = ws6-inkscape
    match:class = ^(Inkscape|inkscape)$
    workspace = 6
}

# Workspace 7: Data
windowrule {
    name = ws7-datagrip
    match:class = ^(jetbrains-datagrip)$
    workspace = 7
}

# Workspace 8: Gaming
windowrule {
    name = ws8-steam
    match:class = ^(Steam|steam)$
    workspace = 8
}
windowrule {
    name = ws8-lutris
    match:class = ^(Lutris|lutris)$
    workspace = 8
}
windowrule {
    name = ws8-battlenet
    match:class = ^(battle.net.exe)$
    workspace = 8
}

# Workspace 9: Music & Media
windowrule {
    name = ws9-music
    match:class = ^(music)$
    workspace = 9
}
windowrule {
    name = ws9-spotify
    match:class = ^(spotify|Spotify)$
    workspace = 9
}
windowrule {
    name = ws9-visualizer
    match:class = ^(visualizer|Visualizer)$
    workspace = 9
    border_size = 0
    no_shadow = true
    no_blur = true
    opacity = 1.0 1.0
}
windowrule {
    name = ws9-todoist
    match:class = ^(Todoist|todoist)$
    workspace = 9
}
windowrule {
    name = ws9-notion
    match:class = ^(notion)$
    workspace = 9
}

# Workspace 10: Misc / System
windowrule {
    name = ws10-keepass
    match:class = ^(KeePassXC)$
    workspace = 10
}
windowrule {
    name = ws10-monitors
    match:class = ^(btop|htop)$
    workspace = 10
}
windowrule {
    name = ws10-torrent
    match:class = ^(torrent|Transmission|Deluge)$
    workspace = 10
}
windowrule {
    name = ws10-vm
    match:class = ^(VirtualBox Manager|qemu)$
    workspace = 10
}

# ##############################################################################
# FLOATING WINDOWS
# ##############################################################################

# File managers
windowrule {
    name = float-thunar
    match:class = ^(Thunar|thunar|Nemo|nemo)$
    float = true
    size = 45% 55%
    center = true
}
windowrule {
    name = float-files
    match:class = ^(files|disk)$
    float = true
    size = 1280 720
    pin = true
}

# System tools
windowrule {
    name = float-pavucontrol
    match:class = ^(pavucontrol|Pavucontrol)$
    float = true
    size = 45% 80%
    center = true
}
windowrule {
    name = float-nm-editor
    match:class = ^(nm-connection-editor|Nm-connection-editor|blueman-manager)$
    float = true
}
windowrule {
    name = float-appearance
    match:class = ^(Lxappearance|Nvidia-settings)$
    float = true
}

# Image viewers
windowrule {
    name = float-image-viewers
    match:class = ^(feh|Sxiv|Nsxiv|nsxiv|imv)$
    float = true
    size = 70% 75%
    center = true
}

# Password managers
windowrule {
    name = float-keepass
    match:class = ^(KeePassXC|1password)$
    float = true
    size = 70% 75%
    center = true
}

# Utilities
windowrule {
    name = float-calculator
    match:class = ^(Galculator)$
    float = true
    size = 20% 40%
}
windowrule {
    name = float-gpick
    match:class = ^(Gpick|File-roller)$
    float = true
}
windowrule {
    name = float-screenruler
    match:class = ^(Screenruler)$
    float = true
    center = true
    border_size = 0
    rounding = 0
}

# Emulators
windowrule {
    name = float-emulator
    match:class = ^(Emulator)$
    float = true
}
windowrule {
    name = float-android-emulator
    match:title = ^(Android Emulator)$
    float = true
}

# Scratchpads
windowrule {
    name = float-scratchpad
    match:class = ^(scratchpad)$
    float = true
    size = 70% 75%
    center = true
}
windowrule {
    name = float-markdown-input
    match:class = ^(markdown_input|todo_input)$
    float = true
    size = 1280 720
    center = true
}
windowrule {
    name = float-floating-class
    match:class = ^(floating)$
    float = true
}

# Dialog windows
windowrule {
    name = float-dialogs
    match:title = ^(Open|Save|Open File|Save File|Open Folder|Confirm)$
    float = true
    size = 55% 65%
    center = true
}
windowrule {
    name = float-file-progress
    match:title = ^(File Operation Progress)$
    float = true
}

# Misc floating
windowrule {
    name = float-copyq
    match:class = ^(copyq|DTA)$
    float = true
}
windowrule {
    name = float-metamask
    match:title = ^(MetaMask Notification|Event Tester)$
    float = true
}

# Terminals (when floating)
windowrule {
    name = terminal-floating-size
    match:class = ^(kitty|Alacritty)$
    match:float = true
    size = 45% 50%
}

# ##############################################################################
# FULLSCREEN GAMES
# ##############################################################################

windowrule {
    name = fullscreen-steam-games
    match:class = ^(steam_app_.*)$
    fullscreen = true
}
windowrule {
    name = fullscreen-games-1
    match:class = ^(factorio|dota2|csgo_linux64|portal2_linux)$
    fullscreen = true
}
windowrule {
    name = fullscreen-games-2
    match:class = ^(Terraria.bin.x86|dontstarve_steam|lt-love|EtG.x86_64)$
    fullscreen = true
}

# Game launchers (keep tiled, not floating)
windowrule {
    name = tile-steam-main
    match:class = ^(Steam)$
    match:title = ^(Steam)$
    tile = true
    center = true
}
windowrule {
    name = tile-chromium
    match:class = ^(Chromium-browser|Chromium)$
    tile = true
}

# ##############################################################################
# OPACITY RULES
# ##############################################################################

windowrule {
    name = opacity-terminals
    match:class = ^(kitty|Alacritty)$
    opacity = 0.95 0.90
}

# ##############################################################################
# SPECIAL APPS
# ##############################################################################

windowrule {
    name = hyprland-run
    match:class = ^(hyprland-run)$
    float = true
    move = 20 100%-120
}

windowrule {
    name = wavebox-modals
    match:class = ^(wavebox-.+-Default)$
    float = true
}

# ##############################################################################
# XWAYLAND VIDEO BRIDGE
# ##############################################################################

windowrule {
    name = xwayland-video-bridge
    match:class = ^(xwaylandvideobridge)$
    opacity = 0.0
    no_focus = true
    no_blur = true
    no_shadow = true
}
